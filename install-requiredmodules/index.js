(()=>{var __webpack_modules__={727:module=>{module.exports=eval("require")("@actions/cache")},442:module=>{module.exports=eval("require")("@actions/core")},81:e=>{"use strict";e.exports=require("child_process")},147:e=>{"use strict";e.exports=require("fs")},17:e=>{"use strict";e.exports=require("path")}};var __webpack_module_cache__={};function __nccwpck_require__(e){var r=__webpack_module_cache__[e];if(r!==undefined){return r.exports}var o=__webpack_module_cache__[e]={exports:{}};var _=true;try{__webpack_modules__[e](o,o.exports,__nccwpck_require__);_=false}finally{if(_)delete __webpack_module_cache__[e]}return o.exports}if(typeof __nccwpck_require__!=="undefined")__nccwpck_require__.ab=__dirname+"/";var __webpack_exports__={};(()=>{const e=__nccwpck_require__(442);const r=__nccwpck_require__(727);const o=__nccwpck_require__(17);const _=__nccwpck_require__(147);const{execFileSync:t}=__nccwpck_require__(81);async function restore(e,o){function restoreKey(e,r,o){return o.slice(0,r).concat(e).join("-")}try{const _=o.split("-").map(restoreKey);return await r.restoreCache(e,o,_)}catch(e){}}async function main(){try{var s=[e.getInput("requiredModules-path"),o.resolve("RequiredModules.psd1"),o.resolve("RequiredModules","RequiredModules.psd1")].filter((e=>_.existsSync(e)))[0];const c=String(t("pwsh",["-noprofile","-nologo","-noninteractive","-command",'$(Get-FileHash "'+s+'").Hash'])).trim();const n=String(t("pwsh",["-noprofile","-nologo","-noninteractive","-command","$Env:PSModulePath.Split([IO.Path]::PathSeparator).Where({$_.StartsWith($Home)})"])).trim();const u=process.env["ImageOS"]||process.env["RUNNER_OS"]||process.env["OS"]||"";var i=[u,"psmodules",c.trim()].join("-");e.info("Restore: '"+n+"' from cache: "+i);var a=await restore([n],i);if(a){e.info("Cache hit: "+a)}else{const _=o.resolve(__dirname,"Install-RequiredModule.ps1");e.info("PS> "+_+" -RequiredModulesFile "+s);e.info(t("pwsh",["-noprofile","-nologo","-noninteractive","-file",_,"-RequiredModulesFile",s,"-TrustRegisteredRepositories","-Scope","CurrentUser"]));a=await r.saveCache([n],i);e.info("New cache ["+a+"] for: "+n)}}catch(r){e.setFailed(r.message)}}main()})();module.exports=__webpack_exports__})();